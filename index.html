<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>William Liu - Links</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./style.css">
</head>

<body onload="changeColor();">
  <div id="vanta"></div>
  <main>
    <header>
      <img src="./images/WilliamLiu.JPG" />
      <h1>@william967948</h1>
    </header>
    <ul>
      <li id="facebook" class="facebook" onmouseover="hover(this.id);" onmouseout="unhover(this.id);"
        onclick="stopTextColor();">
        <a class="link" href="https://www.facebook.com/profile.php?id=100004865142685">
          <img id="img-facebook" class="link" src="./images/facebook-logo.gif" alt="facebook" width="20">
          Facebook
        </a>
      </li>
      <li id="github" class="github">
        <a class="link" href="https://github.com/william967945">
          <img id="img-github" src="./images/github-logo.gif" alt="GitHub" width="20">
          GitHub
        </a>
      </li>
      <li id="linkedin" class="linkedin" onmouseover="hover(this.id);" onmouseout="unhover(this.id);">
        <a class="link" href="https://www.linkedin.com/in/william967945">
          <img id="img-linkedin" src="./images/linkedin-logo.gif" alt="Linkedin" width="20">
          Linkedin
        </a>
      </li>
      <li id="instagram" class="instagram" onmouseover="hover(this.id);" onmouseout="unhover(this.id);">
        <a class="link" href="https://www.instagram.com/c.han_liu">
          <img id="img-instagram" src="./images/instagram-logo.gif" alt="Instagram" width="20">
          Instagram
        </a>
      </li>
      <li id="gmail" class="gmail" onmouseover="hover(this.id);" onmouseout="unhover(this.id);">
        <div class="tooltip">
          <span class="tooltiptext" id="myTooltip"></span>
          <button id="button-gmail" class="button" onclick="myFunction();" onmouseout="outFunc();">
            <img id="img-gmail" src="./images/gmail-logo.gif" alt="Gmail" width="20">
            william967948@gmail.com
          </button>
        </div>
      </li>
    </ul>
  </main>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.waves.min.js"></script>
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      VANTA.WAVES({
        el: "#vanta",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 650.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0x5c8ea0,
        shininess: 50.00,
        waveHeight: 10.00,
        zoom: 0.65
      })
      setTimeout(() => {
        const main = document.querySelector('main')
        main.style.opacity = 1;
        main.style.filter = 'blur(0px)';
      }, 500);
    });

    function myFunction() {
      var copyText = document.getElementById('button-gmail');
      const content = copyText.textContent.trim();
      navigator.clipboard.writeText(content);
      var tooltip = document.getElementById("myTooltip");
      tooltip.innerHTML = "Copied: " + copyText.textContent;
      tooltip.className = "tooltiptext tooltiptext2";

      setTimeout(() => {
        const main = document.querySelector('span');
        main.style.opacity = 0;
        main.style.filter = 'blur(0px)';
      }, 1500);

      const main = document.querySelector('span');
      main.style.opacity = 1;
    }

    function outFunc() {
      var tooltip = document.getElementById("myTooltip");
      tooltip.innerHTML = "";
      tooltip.className = "tooltiptext";
    }

    function hover(id) {
      const element = document.getElementById("img-" + id);
      element.setAttribute('src', `./images/${id}-logo-colored.gif`);

    }

    function unhover(id) {
      const element = document.getElementById("img-" + id);
      element.setAttribute('src', `./images/${id}-logo.gif`);
      // element.style.backgroundColor = 'black';

    }

    var index = -1;

    function incrementLoop() {
      if (index >= 4) {
        index = 0;
      } else {
        index += 1;
      }
    }

    function changeColor() {
      setInterval(incrementLoop, 2000);
      nIntervId = setInterval(flashButton, 2000);
      colorList();
    }

    const buttonList = document.querySelectorAll('li');
    const color = [];

    function colorList() {
      buttonList.forEach(button => {
        color.push(button.className);
      });

      buttonList.forEach(button => {
        button.className = 'color-fffa';
      });
      return color;
    }

    function flashButton() {
      // console.log(buttonList[index]);
      const element = buttonList[index];
      // console.log(color);
      element.className = element.className === "color-fffa" ? `${color[index]}` : "color-fffa";
      console.log(element.className);
      a = element.childNodes[1]; // gmail is undefind
      if (a.className !== 'tooltip') {
        a.className = a.className === "link" ? "link-white" : "link";
      } else {
        console.log('bbbbbbbbbbbbb');
        const button = document.getElementById('button-gmail');
        console.log(button.className);
        //從找到button 改白色的地方開始
        button.className = button.className === "button" ? "button-white" : "button";
        console.log(button.className);
      }
    }

    function stopTextColor() {
      clearInterval(nIntervId);
    }
  </script>
</body>

</html>